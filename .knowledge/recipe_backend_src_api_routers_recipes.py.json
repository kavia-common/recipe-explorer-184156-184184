{"is_source_file": true, "format": "Python", "description": "This file defines API routes for managing recipes in a web application using FastAPI. It includes endpoints for listing, creating, retrieving, updating, deleting, and rating recipes, with filtering and sorting capabilities. It interacts with database models and schemas related to recipes.", "external_files": ["src.api.deps", "src.db", "src.db.models", "src.schemas.recipe"], "external_methods": ["get_current_active_user", "pagination_params", "get_db", "Recipe", "RecipeRating", "User", "RatingCreate", "RecipeCreate", "RecipeOut", "RecipeUpdate"], "published": ["router"], "classes": [], "methods": [{"name": "_apply_filters", "description": "Applies optional filters to a SQLAlchemy query for recipes based on search, tags, cuisine, difficulty, and time constraints."}, {"name": "list_recipes", "description": "Handles GET requests to list recipes with optional filtering, sorting, and pagination."}, {"name": "create_recipe", "description": "Handles POST requests to create a new recipe associated with the current user."}, {"name": "get_recipe", "description": "Handles GET requests to retrieve a specific recipe by its ID."}, {"name": "update_recipe", "description": "Handles PUT requests to update an existing recipe, only if the current user is the owner."}, {"name": "delete_recipe", "description": "Handles DELETE requests to remove a recipe, only if the current user is the owner."}, {"name": "rate_recipe", "description": "Handles POST requests to rate or update the rating of a recipe by the current user, and recalculates the average rating."}], "calls": ["db.query", "db.add", "db.commit", "db.refresh", "func.avg", "cast", "and_", "asc", "desc", "pagination_params", "get_current_active_user", "get_db"], "search-terms": ["recipes API", "recipe filtering", "recipe rating", "recipe CRUD", "recipe metadata", "FastAPI recipes router"], "state": 2, "file_id": 16, "knowledge_revision": 66, "git_revision": "78ffc12253b2f77f4f8814d0e4e0af2838b18b59", "revision_history": [{"35": ""}, {"40": "05a11c8444f688c46fddfe28a69b2aada9555e1c"}, {"42": "05a11c8444f688c46fddfe28a69b2aada9555e1c"}, {"44": "acd632dbb541fe7061c0b722b07bdaffc46d6e2c"}, {"46": "acd632dbb541fe7061c0b722b07bdaffc46d6e2c"}, {"47": "acd632dbb541fe7061c0b722b07bdaffc46d6e2c"}, {"48": "acd632dbb541fe7061c0b722b07bdaffc46d6e2c"}, {"49": "78ffc12253b2f77f4f8814d0e4e0af2838b18b59"}, {"66": "78ffc12253b2f77f4f8814d0e4e0af2838b18b59"}], "ctags": [], "filename": "recipe_backend/src/api/routers/recipes.py", "format-version": 4, "code-base-name": "https://github.com/kavia-common/recipe-explorer-184156-184184.git:kavia-main"}