{"is_source_file": true, "format": "Python", "description": "This Python source file defines SQLAlchemy ORM models for a recipe management backend, including User, Recipe, and RecipeRating classes, with database schema details, relationships, and dynamic JSON/Array type handling based on the database backend.", "external_files": ["session.py"], "external_methods": ["session.Base", "session.engine", "func.now()"], "published": ["User", "Recipe", "RecipeRating", "_is_sqlite", "ArrayOfString", "JSONType"], "classes": [{"name": "User", "description": "Represents a user account with authentication details, recipes owned, and ratings given."}, {"name": "Recipe", "description": "Represents a recipe created by a user, including ingredients, steps, tags, and metadata."}, {"name": "RecipeRating", "description": "Represents a rating and optional comment given by a user to a recipe, with uniqueness constraint on user and recipe pair."}], "methods": [{"name": "bool _is_sqlite()", "description": "Determines if the active database backend is SQLite to adjust column types accordingly.", "scope": "", "scopeKind": ""}, {"name": "ArrayOfString()", "description": "Returns the appropriate column type for storing lists of strings, depending on whether the backend is SQLite or PostgreSQL.", "scope": "", "scopeKind": ""}], "calls": ["engine.url.get_backend_name()", "func.now()"], "search-terms": ["Recipe", "User", "RecipeRating", "SQLAlchemy ORM models", "database schema", "backend detection", "JSON handling", "array of strings"], "state": 2, "file_id": 6, "knowledge_revision": 13, "git_revision": "", "ctags": [{"_type": "tag", "name": "ArrayOfString", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184156-184184/recipe_backend/src/db/models.py", "pattern": "/^    def ArrayOfString():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "JSONType", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184156-184184/recipe_backend/src/db/models.py", "pattern": "/^    JSONType = JSONB  # type: ignore[assignment]$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "JSONType", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184156-184184/recipe_backend/src/db/models.py", "pattern": "/^    JSONType = SA_JSON  # type: ignore[assignment]$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "Recipe", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184156-184184/recipe_backend/src/db/models.py", "pattern": "/^class Recipe(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "RecipeRating", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184156-184184/recipe_backend/src/db/models.py", "pattern": "/^class RecipeRating(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "SA_JSON", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184156-184184/recipe_backend/src/db/models.py", "pattern": "/^    from sqlalchemy import JSON as SA_JSON  # available for SQLite as TEXT-encoded JSON$/", "language": "Python", "kind": "unknown", "nameref": "unknown:JSON"}, {"_type": "tag", "name": "User", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184156-184184/recipe_backend/src/db/models.py", "pattern": "/^class User(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__table_args__", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184156-184184/recipe_backend/src/db/models.py", "pattern": "/^    __table_args__ = ($/", "file": true, "language": "Python", "kind": "variable", "scope": "RecipeRating", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184156-184184/recipe_backend/src/db/models.py", "pattern": "/^    __tablename__ = \"recipe_ratings\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "RecipeRating", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184156-184184/recipe_backend/src/db/models.py", "pattern": "/^    __tablename__ = \"recipes\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "Recipe", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184156-184184/recipe_backend/src/db/models.py", "pattern": "/^    __tablename__ = \"users\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "_is_sqlite", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184156-184184/recipe_backend/src/db/models.py", "pattern": "/^def _is_sqlite() -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "avg_rating", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184156-184184/recipe_backend/src/db/models.py", "pattern": "/^    avg_rating: Mapped[Optional[float]] = mapped_column(nullable=True)$/", "language": "Python", "typeref": "typename:Mapped[Optional[float]]", "kind": "variable", "scope": "Recipe", "scopeKind": "class"}, {"_type": "tag", "name": "comment", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184156-184184/recipe_backend/src/db/models.py", "pattern": "/^    comment: Mapped[Optional[str]] = mapped_column(Text, nullable=True)$/", "language": "Python", "typeref": "typename:Mapped[Optional[str]]", "kind": "variable", "scope": "RecipeRating", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184156-184184/recipe_backend/src/db/models.py", "pattern": "/^    created_at: Mapped[datetime] = mapped_column($/", "language": "Python", "typeref": "typename:Mapped[datetime]", "kind": "variable", "scope": "Recipe", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184156-184184/recipe_backend/src/db/models.py", "pattern": "/^    created_at: Mapped[datetime] = mapped_column($/", "language": "Python", "typeref": "typename:Mapped[datetime]", "kind": "variable", "scope": "RecipeRating", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184156-184184/recipe_backend/src/db/models.py", "pattern": "/^    created_at: Mapped[datetime] = mapped_column($/", "language": "Python", "typeref": "typename:Mapped[datetime]", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184156-184184/recipe_backend/src/db/models.py", "pattern": "/^    description: Mapped[Optional[str]] = mapped_column(Text, nullable=True)$/", "language": "Python", "typeref": "typename:Mapped[Optional[str]]", "kind": "variable", "scope": "Recipe", "scopeKind": "class"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184156-184184/recipe_backend/src/db/models.py", "pattern": "/^    email: Mapped[str] = mapped_column(String(255), unique=True, index=True, nullable=False)$/", "language": "Python", "typeref": "typename:Mapped[str]", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184156-184184/recipe_backend/src/db/models.py", "pattern": "/^    id: Mapped[int] = mapped_column(Integer, primary_key=True, index=True)$/", "language": "Python", "typeref": "typename:Mapped[int]", "kind": "variable", "scope": "Recipe", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184156-184184/recipe_backend/src/db/models.py", "pattern": "/^    id: Mapped[int] = mapped_column(Integer, primary_key=True, index=True)$/", "language": "Python", "typeref": "typename:Mapped[int]", "kind": "variable", "scope": "RecipeRating", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184156-184184/recipe_backend/src/db/models.py", "pattern": "/^    id: Mapped[int] = mapped_column(Integer, primary_key=True, index=True)$/", "language": "Python", "typeref": "typename:Mapped[int]", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "ingredients", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184156-184184/recipe_backend/src/db/models.py", "pattern": "/^    ingredients: Mapped[List[str] | None] = mapped_column(ArrayOfString(), nullable=True)$/", "language": "Python", "typeref": "typename:Mapped[List[str] | None]", "kind": "variable", "scope": "Recipe", "scopeKind": "class"}, {"_type": "tag", "name": "is_active", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184156-184184/recipe_backend/src/db/models.py", "pattern": "/^    is_active: Mapped[bool] = mapped_column(default=True, nullable=False)$/", "language": "Python", "typeref": "typename:Mapped[bool]", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "metadata", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184156-184184/recipe_backend/src/db/models.py", "pattern": "/^    metadata: Mapped[Optional[Dict[str, Any]]] = mapped_column(JSONType, nullable=True)$/", "language": "Python", "typeref": "typename:Mapped[Optional[Dict[str, Any]]]", "kind": "variable", "scope": "Recipe", "scopeKind": "class"}, {"_type": "tag", "name": "owner", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184156-184184/recipe_backend/src/db/models.py", "pattern": "/^    owner: Mapped[\"User\"] = relationship(back_populates=\"recipes\")$/", "language": "Python", "typeref": "typename:Mapped[\"User\"]", "kind": "variable", "scope": "Recipe", "scopeKind": "class"}, {"_type": "tag", "name": "owner_id", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184156-184184/recipe_backend/src/db/models.py", "pattern": "/^    owner_id: Mapped[int] = mapped_column(ForeignKey(\"users.id\", ondelete=\"CASCADE\"), index=True/", "language": "Python", "typeref": "typename:Mapped[int]", "kind": "variable", "scope": "Recipe", "scopeKind": "class"}, {"_type": "tag", "name": "password_hash", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184156-184184/recipe_backend/src/db/models.py", "pattern": "/^    password_hash: Mapped[str] = mapped_column(String(255), nullable=False)$/", "language": "Python", "typeref": "typename:Mapped[str]", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "rating", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184156-184184/recipe_backend/src/db/models.py", "pattern": "/^    rating: Mapped[int] = mapped_column(Integer, nullable=False)  # 1..5 typical$/", "language": "Python", "typeref": "typename:Mapped[int]", "kind": "variable", "scope": "RecipeRating", "scopeKind": "class"}, {"_type": "tag", "name": "ratings", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184156-184184/recipe_backend/src/db/models.py", "pattern": "/^    ratings: Mapped[List[\"RecipeRating\"]] = relationship($/", "language": "Python", "typeref": "typename:Mapped[List[\"RecipeRating\"]]", "kind": "variable", "scope": "Recipe", "scopeKind": "class"}, {"_type": "tag", "name": "ratings", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184156-184184/recipe_backend/src/db/models.py", "pattern": "/^    ratings: Mapped[List[\"RecipeRating\"]] = relationship($/", "language": "Python", "typeref": "typename:Mapped[List[\"RecipeRating\"]]", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "recipe", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184156-184184/recipe_backend/src/db/models.py", "pattern": "/^    recipe: Mapped[\"Recipe\"] = relationship(back_populates=\"ratings\")$/", "language": "Python", "typeref": "typename:Mapped[\"Recipe\"]", "kind": "variable", "scope": "RecipeRating", "scopeKind": "class"}, {"_type": "tag", "name": "recipe_id", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184156-184184/recipe_backend/src/db/models.py", "pattern": "/^    recipe_id: Mapped[int] = mapped_column(ForeignKey(\"recipes.id\", ondelete=\"CASCADE\"), index=T/", "language": "Python", "typeref": "typename:Mapped[int]", "kind": "variable", "scope": "RecipeRating", "scopeKind": "class"}, {"_type": "tag", "name": "recipes", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184156-184184/recipe_backend/src/db/models.py", "pattern": "/^    recipes: Mapped[List[\"Recipe\"]] = relationship($/", "language": "Python", "typeref": "typename:Mapped[List[\"Recipe\"]]", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "steps", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184156-184184/recipe_backend/src/db/models.py", "pattern": "/^    steps: Mapped[List[str] | None] = mapped_column(ArrayOfString(), nullable=True)$/", "language": "Python", "typeref": "typename:Mapped[List[str] | None]", "kind": "variable", "scope": "Recipe", "scopeKind": "class"}, {"_type": "tag", "name": "tags", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184156-184184/recipe_backend/src/db/models.py", "pattern": "/^    tags: Mapped[List[str] | None] = mapped_column(ArrayOfString(), nullable=True)$/", "language": "Python", "typeref": "typename:Mapped[List[str] | None]", "kind": "variable", "scope": "Recipe", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184156-184184/recipe_backend/src/db/models.py", "pattern": "/^    title: Mapped[str] = mapped_column(String(255), nullable=False, index=True)$/", "language": "Python", "typeref": "typename:Mapped[str]", "kind": "variable", "scope": "Recipe", "scopeKind": "class"}, {"_type": "tag", "name": "updated_at", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184156-184184/recipe_backend/src/db/models.py", "pattern": "/^    updated_at: Mapped[datetime] = mapped_column($/", "language": "Python", "typeref": "typename:Mapped[datetime]", "kind": "variable", "scope": "Recipe", "scopeKind": "class"}, {"_type": "tag", "name": "updated_at", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184156-184184/recipe_backend/src/db/models.py", "pattern": "/^    updated_at: Mapped[datetime] = mapped_column($/", "language": "Python", "typeref": "typename:Mapped[datetime]", "kind": "variable", "scope": "RecipeRating", "scopeKind": "class"}, {"_type": "tag", "name": "updated_at", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184156-184184/recipe_backend/src/db/models.py", "pattern": "/^    updated_at: Mapped[datetime] = mapped_column($/", "language": "Python", "typeref": "typename:Mapped[datetime]", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "user", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184156-184184/recipe_backend/src/db/models.py", "pattern": "/^    user: Mapped[\"User\"] = relationship(back_populates=\"ratings\")$/", "language": "Python", "typeref": "typename:Mapped[\"User\"]", "kind": "variable", "scope": "RecipeRating", "scopeKind": "class"}, {"_type": "tag", "name": "user_id", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184156-184184/recipe_backend/src/db/models.py", "pattern": "/^    user_id: Mapped[int] = mapped_column(ForeignKey(\"users.id\", ondelete=\"CASCADE\"), index=True)$/", "language": "Python", "typeref": "typename:Mapped[int]", "kind": "variable", "scope": "RecipeRating", "scopeKind": "class"}, {"_type": "tag", "name": "username", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184156-184184/recipe_backend/src/db/models.py", "pattern": "/^    username: Mapped[Optional[str]] = mapped_column(String(50), unique=True, index=True, nullabl/", "language": "Python", "typeref": "typename:Mapped[Optional[str]]", "kind": "variable", "scope": "User", "scopeKind": "class"}], "hash": "3e1315561352ed8b9b75da702af8a03d", "format-version": 4, "code-base-name": "recipe_backend", "filename": "recipe_backend/src/db/models.py", "fields": [{"name": "JSONType = JSONB  # type: ignore[assignment]", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "JSONType = SA_JSON  # type: ignore[assignment]", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "__table_args__ = (", "scope": "RecipeRating", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"recipe_ratings\"", "scope": "RecipeRating", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"recipes\"", "scope": "Recipe", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"users\"", "scope": "User", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[Optional[float]] avg_rating", "scope": "Recipe", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[Optional[str]] comment", "scope": "RecipeRating", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[datetime] created_at", "scope": "Recipe", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[Optional[str]] description", "scope": "Recipe", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[str] email", "scope": "User", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[int] id", "scope": "Recipe", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[List[str] | None] ingredients", "scope": "Recipe", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[bool] is_active", "scope": "User", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[Optional[Dict[str, Any]]] metadata", "scope": "Recipe", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[\"User\"] owner", "scope": "Recipe", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[int] owner_id", "scope": "Recipe", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[str] password_hash", "scope": "User", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[int] rating", "scope": "RecipeRating", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[List[\"RecipeRating\"]] ratings", "scope": "Recipe", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[\"Recipe\"] recipe", "scope": "RecipeRating", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[int] recipe_id", "scope": "RecipeRating", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[List[\"Recipe\"]] recipes", "scope": "User", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[List[str] | None] steps", "scope": "Recipe", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[List[str] | None] tags", "scope": "Recipe", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[str] title", "scope": "Recipe", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[datetime] updated_at", "scope": "Recipe", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[\"User\"] user", "scope": "RecipeRating", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[int] user_id", "scope": "RecipeRating", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[Optional[str]] username", "scope": "User", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"13": ""}]}