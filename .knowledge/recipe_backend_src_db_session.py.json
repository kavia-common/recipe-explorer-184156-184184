{"is_source_file": true, "format": "Python", "description": "This file sets up database connection and session management using SQLAlchemy, including environment-based database URL resolution, engine creation, session factories, and utility functions for session handling and table creation.", "external_files": ["os", "contextlib", "typing", "sqlalchemy"], "external_methods": ["os.getenv", "contextlib.contextmanager", "typing.Generator", "sqlalchemy.create_engine", "sqlalchemy.engine.Engine", "sqlalchemy.orm.sessionmaker", "sqlalchemy.orm.Session", "sqlalchemy.orm.declarative_base"], "published": ["get_db", "db_session", "run_create_all"], "classes": [], "methods": [{"name": "_resolve_database_url", "description": "Resolves the database URL from environment variables, with fallback to a local SQLite database."}, {"name": "_create_engine", "description": "Creates a SQLAlchemy engine based on the provided database URL, with special handling for SQLite."}, {"name": "get_db", "description": "FastAPI dependency that yields a database session, ensuring proper cleanup."}, {"name": "db_session", "description": "Context manager for managing database sessions outside of FastAPI, with commit and rollback handling."}, {"name": "run_create_all", "description": "Creates all tables based on provided or default metadata, for bootstrap or startup purposes."}], "calls": ["os.getenv", "create_engine", "sessionmaker", "Base.metadata.create_all", "SessionLocal()"], "search-terms": ["SQLAlchemy session setup", "database URL resolution", "create_engine", "sessionmaker", "FastAPI database dependency", "table creation"], "state": 2, "file_id": 5, "knowledge_revision": 62, "git_revision": "2c9ee4ce14224f43860b607e00bd0c7153fc7b97", "revision_history": [{"11": ""}, {"62": "2c9ee4ce14224f43860b607e00bd0c7153fc7b97"}], "ctags": [], "filename": "recipe_backend/src/db/session.py", "format-version": 4, "code-base-name": "https://github.com/kavia-common/recipe-explorer-184156-184184.git:kavia-main"}