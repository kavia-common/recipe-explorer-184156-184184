{"is_source_file": true, "format": "Python", "description": "This file provides database session management utilities for a Python project using SQLAlchemy. It includes functions to resolve the database URL from environment variables, create the database engine, provide session objects for database interactions, and create database tables from models' metadata.", "external_files": ["os", "contextlib", "typing", "sqlalchemy"], "external_methods": ["os.getenv", "contextlib.contextmanager", "sqlalchemy.create_engine", "sqlalchemy.orm.sessionmaker", "sqlalchemy.orm.Session", "sqlalchemy.orm.declarative_base"], "published": ["get_db"], "classes": [], "methods": [{"name": "str _resolve_database_url()", "description": "Resolves the database URL from environment variables or falls back to a local SQLite database.", "scope": "", "scopeKind": ""}, {"name": "Engine _create_engine(db_url: str)", "description": "Creates an SQLAlchemy engine based on the provided database URL, with specific configurations for SQLite.", "scope": "", "scopeKind": ""}, {"name": "Generator[Session,None,None] get_db()", "description": "FastAPI dependency that yields a database session, ensuring proper cleanup.", "scope": "", "scopeKind": ""}, {"name": "Generator[Session,None,None] db_session()", "description": "Context manager for database sessions, suitable for scripts or non-FastAPI usage.", "scope": "", "scopeKind": ""}, {"name": "None run_create_all(models_base: Optional[declarative_base] = None)", "description": "Creates all tables based on SQLAlchemy models' metadata, used for bootstrap or startup.", "scope": "", "scopeKind": ""}], "calls": ["os.getenv", "sessionmaker", "create_engine", "Base.metadata.create_all", "SessionLocal()", "session.close", "session.commit", "session.rollback"], "search-terms": ["SQLAlchemy database session management", "resolve database URL", "create engine", "sessionmaker", "FastAPI get_db"], "state": 2, "file_id": 5, "knowledge_revision": 11, "git_revision": "", "ctags": [{"_type": "tag", "name": "Base", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184156-184184/recipe_backend/src/db/session.py", "pattern": "/^Base = declarative_base()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "DATABASE_URL", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184156-184184/recipe_backend/src/db/session.py", "pattern": "/^DATABASE_URL = _resolve_database_url()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "SessionLocal", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184156-184184/recipe_backend/src/db/session.py", "pattern": "/^SessionLocal = sessionmaker($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "_create_engine", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184156-184184/recipe_backend/src/db/session.py", "pattern": "/^def _create_engine(db_url: str) -> Engine:$/", "language": "Python", "typeref": "typename:Engine", "kind": "function", "signature": "(db_url: str)"}, {"_type": "tag", "name": "_resolve_database_url", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184156-184184/recipe_backend/src/db/session.py", "pattern": "/^def _resolve_database_url() -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "db_session", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184156-184184/recipe_backend/src/db/session.py", "pattern": "/^def db_session() -> Generator[Session, None, None]:$/", "language": "Python", "typeref": "typename:Generator[Session,None,None]", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "engine", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184156-184184/recipe_backend/src/db/session.py", "pattern": "/^engine: Engine = _create_engine(DATABASE_URL)$/", "language": "Python", "typeref": "typename:Engine", "kind": "variable"}, {"_type": "tag", "name": "get_db", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184156-184184/recipe_backend/src/db/session.py", "pattern": "/^def get_db() -> Generator[Session, None, None]:$/", "language": "Python", "typeref": "typename:Generator[Session,None,None]", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "run_create_all", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184156-184184/recipe_backend/src/db/session.py", "pattern": "/^def run_create_all(models_base: Optional[declarative_base] = None) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(models_base: Optional[declarative_base] = None)"}], "hash": "79f254809b477a44320d4f747bfe495c", "format-version": 4, "code-base-name": "recipe_backend", "filename": "recipe_backend/src/db/session.py", "fields": [{"name": "Base = declarative_base()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "DATABASE_URL = _resolve_database_url()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "SessionLocal = sessionmaker(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Engine engine", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"11": ""}]}